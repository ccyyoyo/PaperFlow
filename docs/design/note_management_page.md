# Note Management Page Responsibilities

目的：將筆記列表管理與閱讀視圖分離，避免在 PDF 檢視頁面塞入過多資訊。此頁面專注於筆記整理、篩選與批次操作。

## 版面分區

1. **篩選列 (左側欄或頂部工具列)**
   - 篩選條件：顏色分類、標籤、多關鍵字搜尋、日期範圍。
   - 頁面篩選：可切換「全部頁面」或指定頁碼群組。
   - 快捷篩選：顯示常用標籤、最近編輯、當前 Workspace。

2. **筆記列表 (主視區)**
   - 顯示欄位：頁碼、顏色、標籤、內容摘要、最後更新時間。
   - 排序選項：建立時間、更新時間、頁碼、顏色。
   - 支援多選與批次動作（變更顏色、加標籤、刪除）。
   - 可在同一列展開全文預覽與原文片段。

3. **筆記詳情/編輯面板 (右側欄或彈框)**
   - 顯示完整內容與原 PDF 片段預覽（縮圖或跳轉連結）。
   - 可編輯內容、顏色、標籤；顯示建立/更新資訊。
   - 提供「跳至閱讀頁」CTA，開啟對應 PDF 頁面。

## 功能責任

| 功能 | 負責區塊 | 說明 |
| --- | --- | --- |
| 篩選條件 | 篩選列 | 更新列表顯示的資料集；記住使用者偏好。 |
| 筆記列表 | 主視區 | 顯示符合條件的筆記，支援排序、批次操作。 |
| 筆記選取 | 主視區 | 單/多選模式切換，提供批次動作。 |
| 編輯/檢視 | 詳情面板 | 讀取筆記內容，允許編輯並保存變更。 |
| 導航跳轉 | 詳情面板 | 調用 Tauri IPC 跳回 PDF 閱讀頁並定位。 |
| 匯入/匯出 | 工具列 | （未來）提供 Workspace 內筆記匯出、備份。 |

## 資料流程

1. 頁面載入 → 取得 Workspace 筆記清單（後端命令）。
2. 篩選/排序 → 在前端記憶體或透過後端命令執行，回傳結果。
3. 編輯筆記 → 呼叫 `update_note` 命令後重新整理列表。
4. 刪除筆記 → 呼叫 `delete_note` 命令後從列表移除。
5. 跳轉閱讀 → 發送事件回閱讀頁面，或開新視窗載入對應頁碼。

## 後續拆分工作

- 建立 `NoteManagerPage` React 元件（`src/pages/note-manager/`）。
- 新增筆記 REST / Command 方法：`list_notes`、`update_note_color`、`bulk_tag` 等。
- 設計路由（多頁或模組化 Tab）以容納閱讀頁與管理頁。
- 撰寫整合測試：從新頁面新增/編輯筆記後，閱讀頁可同步顯示。
